<!DOCTYPE html>
<html>
<head>
  <title>Share Location</title>
</head>
<body>
  <h3>Fetching your locationâ€¦</h3>
  <p>Please allow location access to continue.</p>

  <script>
    // Replace this URL with your actual FormSG form link from the QR code
    const formLink = "https://form.gov.sg/xxxxxxxxxxxx"; // <-- put your form URL here

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(success, error);
    } else {
      alert("Geolocation is not supported by your browser.");
    }

    function success(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;

      // Redirect back to the form with lat & lon in query string
      const redirectURL = `${formLink}?lat=${lat}&lon=${lon}`;
      window.location.href = redirectURL;
    }

    function error(err) {
      alert("Unable to get your location: " + err.message);
    }
  </script>
</body>
</html>
